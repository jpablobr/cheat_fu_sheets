<!DOCTYPE html>
<html>
<head>
  <meta http-equiv='content-type' value='text/html;charset=utf8'>
  <meta name='generator' value='Ronn/v0.7.3 (http://github.com/rtomayko/ronn/tree/0.7.3)'>
  <title>ruby_rails_tips(1) - Ruby on Rails Tips</title>
  <style type='text/css' media='all'>
  /* style: man */
  body#manpage {margin:0}
  .mp {max-width:100ex;padding:0 9ex 1ex 4ex}
  .mp p,.mp pre,.mp ul,.mp ol,.mp dl {margin:0 0 20px 0}
  .mp h2 {margin:10px 0 0 0}
  .mp > p,.mp > pre,.mp > ul,.mp > ol,.mp > dl {margin-left:8ex}
  .mp h3 {margin:0 0 0 4ex}
  .mp dt {margin:0;clear:left}
  .mp dt.flush {float:left;width:8ex}
  .mp dd {margin:0 0 0 9ex}
  .mp h1,.mp h2,.mp h3,.mp h4 {clear:left}
  .mp pre {margin-bottom:20px}
  .mp pre+h2,.mp pre+h3 {margin-top:22px}
  .mp h2+pre,.mp h3+pre {margin-top:5px}
  .mp img {display:block;margin:auto}
  .mp h1.man-title {display:none}
  .mp,.mp code,.mp pre,.mp tt,.mp kbd,.mp samp,.mp h3,.mp h4 {font-family:monospace;font-size:14px;line-height:1.42857142857143}
  .mp h2 {font-size:16px;line-height:1.25}
  .mp h1 {font-size:20px;line-height:2}
  .mp {text-align:justify;background:#fff}
  .mp,.mp code,.mp pre,.mp pre code,.mp tt,.mp kbd,.mp samp {color:#131211}
  .mp h1,.mp h2,.mp h3,.mp h4 {color:#030201}
  .mp u {text-decoration:underline}
  .mp code,.mp strong,.mp b {font-weight:bold;color:#131211}
  .mp em,.mp var {font-style:italic;color:#232221;text-decoration:none}
  .mp a,.mp a:link,.mp a:hover,.mp a code,.mp a pre,.mp a tt,.mp a kbd,.mp a samp {color:#0000ff}
  .mp b.man-ref {font-weight:normal;color:#434241}
  .mp pre {padding:0 4ex}
  .mp pre code {font-weight:normal;color:#434241}
  .mp h2+pre,h3+pre {padding-left:0}
  ol.man-decor,ol.man-decor li {margin:3px 0 10px 0;padding:0;float:left;width:33%;list-style-type:none;text-transform:uppercase;color:#999;letter-spacing:1px}
  ol.man-decor {width:100%}
  ol.man-decor li.tl {text-align:left}
  ol.man-decor li.tc {text-align:center;letter-spacing:4px}
  ol.man-decor li.tr {text-align:right;float:right}
  </style>
</head>
<!--
  The following styles are deprecated and will be removed at some point:
  div#man, div#man ol.man, div#man ol.head, div#man ol.man.

  The .man-page, .man-decor, .man-head, .man-foot, .man-title, and
  .man-navigation should be used instead.
-->
<body id='manpage'>
  <div class='mp' id='man'>

  <div class='man-navigation' style='display:none'>
    <a href="#Tips">Tips</a>
  </div>

  <ol class='man-decor man-head man head'>
    <li class='tl'>ruby_rails_tips(1)</li>
    <li class='tc'></li>
    <li class='tr'>ruby_rails_tips(1)</li>
  </ol>

  <h1>Ruby on Rails Tips</h1>
<h2 id="Tips">Tips</h2>

<pre><code>Store sessions in the database.
Use a custom configuration file for passwords and API keys instead of storing them in your Subversion repository. I use YAML and mirror the style of database.yml.
Use constants where needed. Instead of repeating strings like the address of your customer service reply email, set it once in a constant (in environment.rb or the appropriate environment file) and use that throughout your application.
Keep time in UTC. A no brainer, and easy to do.
Don't loop through ActiveRecord models inside other models. Use eager loading if you need to work with multiple associated models. Better yet, write a custom SQL query and let the database do the work for you.
Beware of binary fields. By default, all fields are returned with queries, including the full contents of any binary fields. Use :select to pull out only the fields you need.
Write tables to cache data for reports that span months and years. It.s much faster than re-generating a year.s worth of reports every time a page is loaded.
Create a table with a list of country names. By default, Rails uses strings for selects and lists of countries, which doesn.t work well for reporting or database consistency between models.
Avoid bloated controllers. Instead of piling actions into a controller, limit yourself to 10 actions per controller, then rethink your design.
Keep your controllers and views skinny. In general, most of your code should be in your models, not your controllers or views.
Don't store objects in the session. Use integers or short strings if necessary, then pull the appropriate object out of the database for the duration of a single request.
Avoid heavy response processing. Can you mark a record as needing to be processed, then use a cron job or a messaging server to do the long-running work? BackgroundRB is also an option. (I use this technique for filtering SPAM comments on this blog).
Use ar_mailer to queue bulk emails instead of sending them during the Rails response cycle.
Monitor your servers with the exception_notification plugin, munin, monit, or other tools.
Don't cut costs on hardware. You.ll quickly lose the money you thought you were saving if your developers have to spend even one day a month on unexpected server maintenance due to poor backups or cheap hardware.
Test-drive your development.

Use database indexes to speed up queries. Rails only indexes primary keys, so you.ll have to find the spots that need more attention.
Profile your code. The ruby-prof gem and plugin helped me make an application three times faster with only minimal changes to the code.
Minimize graphic-related dependencies. If your application only needs to make a few thumbnails, don.t waste memory by importing large graphics libraries. Look at mini-magick or image_science for lightweight thumbnailing.
Avoid excessive repeated rendering of small partials.
Use CSS instead of inline tags to apply selective styling.
Don't use ActiveRecord.s serialize option to store large objects in database fields.
Use attr_protected :fieldname in models to keep database fields from being manipulated from forms (or from any calls to Model.update_attributes(params[:model])).
Use Ruby classes and inheritance to refactor repeated controller code.
Use unobtrusive Javascripting techniques to separate behavior from markup.
Package self-sufficient classes and modules as plugins or RubyGems.
Cache frequently accessed data and rendered content where possible.
Write custom Test::Unit assertions or rSpec matchers to help with debugging test suite errors.
Rotate the Rails and Mongrel logfiles using the logrotate daemon on Linux.
Build a reliable backup system.
Automate deployment and maintenance with Capistrano or Vlad.
Keep method bodies short. If a method is more than 10 lines long, it.s time to break it down and refactor.
Run flog to determine overly complex methods and clases.
Don't use too many conditionals. Take advantage of case statements and Ruby objects to filter instead of multiply-nested if statements.
Don't be too clever. Ruby has great metaprogramming features, but they are easy to overuse (such as eval and method_missing).
Become familiar with the most popular plugins. Instead of re-implementing the wheel, save yourself some time by using well tested, popular plugins.
</code></pre>


  <ol class='man-decor man-foot man foot'>
    <li class='tl'></li>
    <li class='tc'>July 2011</li>
    <li class='tr'>ruby_rails_tips(1)</li>
  </ol>

  </div>
</body>
</html>

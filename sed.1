.\" generated with Ronn/v0.7.3
.\" http://github.com/rtomayko/ronn/tree/0.7.3
.
.TH "SED" "1" "August 2011" "" ""
.
.SH "NAME"
\fBsed\fR
.
.P
sed Gsed \'/sed \'G;G\'sed \'n;d\'sed \'/regex/{x;p;x;}\'sed \'/regex/G\'sed \'/regex/{x;p;x;G;}\'
.
.P
NUMBERING:sed = filename | sed \'N;s/\en/\et/\'sed = filename | sed \'N; s/ /; s/ *(\.{6,})\en/\e1 /\'sed \'/\./=\' filename | sed \'/\./N; s/\en/ /\'sed \-n \'$=\'
.
.P
TEXT CONVERSION AND SUBSTITUTION:sed \'s/\.$//\' # assumes that all lines end with CR/LF sed \'s/ # in bash/tcsh, press Ctrl\-V then Ctrl\-M sed \'s/\ex0D$//\' # gsed 3\.02\.80, but top script is easiersed "s/$/\fBecho \-e \e\e\er\fR/" # command line under ksh sed \'s/$\'"/\fBecho \e\e\er\fR/" # command line under bash sed "s/$/\fBecho \e\e\er\fR/" # command line under zsh sed \'s/$/\er/\' # gsed 3\.02\.80sed "s/$//" # method 1 sed \-n p # method 2sed "s/\er//" infile >outfile # UnxUtils sed v4\.0\.7 or higher tr \-d \er outfile # GNU tr version 1\.22 or highersed \'s/ \et]*//\' # see note on \'\et\' at end of filesed \'s/[ \et]*$//\' # see note on \'\et\' at end of filesed \'s/ \et]\fI//;s/[ \et]\fR$//\'sed \'s/ /\'sed \-e :a \-e \'s/ &/;ta\' # set at 78 plus 1 spacesed \-e :a \-e \'s/ & /;ta\' # method 1 sed \-e :a \-e \'s/ &/;ta\' \-e \'s/( *)\e1/\e1/\' # method 2sed \'s/foo/bar/\' # replaces only 1st instance in a line sed \'s/foo/bar/4\' # replaces only 4th instance in a line sed \'s/foo/bar/g\' # replaces ALL instances in a line sed \'s/(\.\fI)foo(\.\fRfoo)/\e1bar\e2/\' # replace the next\-to\-last case sed \'s/(\.*)foo/\e1bar/\' # replace only the last casesed \'/baz/s/foo/bar/g\'sed \'/baz/!s/foo/bar/g\'sed \'s/scarlet/red/g;s/ruby/red/g;s/puce/red/g\' # most seds gsed \'s/scarlet\e|ruby\e|puce/red/g\' # GNU sed onlysed \'1!G;h;$!d\' # method 1 sed \-n \'1!G;h;$p\' # method 2sed \'/\en/!G;s/(\.)(\.*\en)/&\e2\e1/;//D;s/\.//\'sed \'$!N;s/\en/ /\'sed \-e :a \-e \'/\e$/N; s/\e\en//; ta\'sed \-e :a \-e \'$!N;s/\en=/ /;ta\' \-e \'P;D\'gsed \':a;s/\eB[0\-9]{3}>/,&/;ta\' # GNU sed sed \-e :a \-e \'s/(\.*[0\-9])([0\-9]{3})/\e1,\e2/;ta\' # other sedsgsed \':a;s/(gsed \'0~5G\' # GNU sed only sed \'n;n;n;n;G;\' # other seds
.
.P
SELECTIVE PRINTING OF CERTAIN LINES:sed 10qsed qsed \-e :a \-e \'$q;N;11,$D;ba\'sed \'$!N;$!D\'sed \'$!d\' # method 1 sed \-n \'$p\' # method 2sed \-n \'/regexp/p\' # method 1 sed \'/regexp/!d\' # method 2sed \-n \'/regexp/!p\' # method 1, corresponds to above sed \'/regexp/d\' # method 2, simpler syntaxsed \-n \'/regexp/{g;1!p;};h\'sed \-n \'/regexp/{n;p;}\'sed \-n \-e \'/regexp/{=;x;1!p;g;$!N;p;D;}\' \-e hsed \'/AAA/!d; /BBB/!d; /CCC/!d\'sed \'/AAA\.\fIBBB\.\fRCCC/!d\'sed \-e \'/AAA/b\' \-e \'/BBB/b\' \-e \'/CCC/b\' \-e d # most seds gsed \'/AAA\e|BBB\e|CCC/!d\' # GNU sed onlysed \-e \'/\./{H;$!d;}\' \-e \'x;/AAA/!d;\'sed \-e \'/\./{H;$!d;}\' \-e \'x;/AAA/!d;/BBB/!d;/CCC/!d\'sed \-e \'/\./{H;$!d;}\' \-e \'x;/AAA/b\' \-e \'/BBB/b\' \-e \'/CCC/b\' \-e d gsed \'/\./{H;$!d;};x;/AAA\e|BBB\e|CCC/b;d\' # GNU sed onlysed \-n \'/sed \-n \'/ # method 1, corresponds to above sed \'/ # method 2, simpler syntaxsed \-n \'/regexp/,$p\'sed \-n \'8,12p\' # method 1 sed \'8,12!d\' # method 2sed \-n \'52p\' # method 1 sed \'52!d\' # method 2 sed \'52q;d\' # method 3, efficient on large filesgsed \-n \'3~7p\' # GNU sed only sed \-n \'3,${p;n;n;n;n;n;n;}\' # other sedssed \-n \'/Iowa/,/Montana/p\' # case sensitive
.
.P
SELECTIVE DELETION OF CERTAIN LINES:sed \'/Iowa/,/Montana/d\'sed \'$!N; / D\'sed \-n \'G; s/\en/&&/; / \-~]\fI\en)\.\fR\en\e1/d; s/\en//; h; P\'sed \'$!N; s/ t; D\'sed \'1,10d\'sed \'$d\'sed \'N;$!P;$!D;$d\'sed \-e :a \-e \'$d;N;2,10ba\' \-e \'P;D\' # method 1 sed \-n \-e :a \-e \'1,10!{P;N;D;};N;ba\' # method 2gsed \'0~8d\' # GNU sed only sed \'n;n;n;n;n;n;n;d;\' # other sedssed \'/ # method 1 sed \'/\./!d\' # method 2sed \'/\./,/ # method 1, allows 0 blanks at top, 1 at EOF sed \'/ # method 2, allows 1 blank at top, 0 at EOFsed \'/sed \'/\./,$!d\'sed \-e :a \-e \'/ \-e \'}\' # works on all seds sed \-e :a \-e \'/ # ditto, except for gsed 3\.02*sed \-n \'/
.
.P
SPECIAL APPLICATIONS:sed "s/\.\fBecho \e\e\eb\fR//g" # double quotes required for Unix environment sed \'s/\. # in bash/tcsh, press Ctrl\-V and then Ctrl\-H sed \'s/\.\ex08//g\' # hex expression for sed v1\.5sed \'/ # deletes everything after first blank linesed \'1,/ # deletes everything up to first blank linesed \'/ */!d; s///;q\'sed \'/ / /\./d;g;q\'sed \'s/ \fI(\.\fR)//; s/>\.\fI//; s/\.\fR[:<] *//\'sed \'s/ /\'sed \'s/ //\'sed \-e :a \-e \'s/\fI[\fR]*>//g;/sed \'/ file1 file2 \.\.\. fileX | uudecode # vers\. 1 sed \'/ "$@" | uudecode # vers\. 2echo @echo off >zipup\.bat dir /b *\.txt | sed "s/ \-mo \e1 \e1\.TXT/" >>zipup\.bat
.
.P
TYPICAL USE: Sed takes one or more editing commands and applies all of them, in sequence, to each line of input\. After all the commands have been applied to the first input line, that line is output and a second input line is taken for processing, and the cycle repeats\. The preceding examples assume that input comes from the standard input device (i\.e, the console, normally this will be piped input)\. One or more filenames can be appended to the command line if the input does not come from stdin\. Output is sent to stdout (the screen)\. Thus:
.
.P
cat filename | sed \'10q\' # uses piped input sed \'10q\' filename # same effect, avoids a useless "cat" sed \'10q\' filename > newfile # redirects output to disk
.
.P
For additional syntax instructions, including the way to apply editing commands from a disk file instead of the command line, consult "sed & awk, 2nd Edition," by Dale Dougherty and Arnold Robbins (O\'Reilly, 1997; http://www\.ora\.com), "UNIX Text Processing," by Dale Dougherty and Tim O\'Reilly (Hayden Books, 1987) or the tutorials by Mike Arst distributed in U\-SEDIT2\.ZIP (many sites)\. To fully exploit the power of sed, one must understand "regular expressions\." For this, see "Mastering Regular Expressions" by Jeffrey Friedl (O\'Reilly, 1997)\. The manual ("man") pages on Unix systems may be helpful (try "man sed", "man regexp", or the subsection on regular expressions in "man ed"), but man pages are notoriously difficult\. They are not written to teach sed use or regexps to first\-time users, but as a reference text for those already acquainted with these tools\.
.
.P
QUOTING SYNTAX: The preceding examples use single quotes (\'\.\.\.\') instead of double quotes ("\.\.\.") to enclose editing commands, since sed is typically used on a Unix platform\. Single quotes prevent the Unix shell from intrepreting the dollar sign ($) and backquotes (\fB\.\.\.\fR), which are expanded by the shell if they are enclosed in double quotes\. Users of the "csh" shell and derivatives will also need to quote the exclamation mark (!) with the backslash (i\.e\., !) to properly run the examples listed above, even within single quotes\. Versions of sed written for DOS invariably require double quotes ("\.\.\.") instead of single quotes to enclose editing commands\.
.
.P
USE OF \'\et\' IN SED SCRIPTS: For clarity in documentation, we have used the expression \'\et\' to indicate a tab character (0x09) in the scripts\. However, most versions of sed do not recognize the \'\et\' abbreviation, so when typing these scripts from the command line, you should press the TAB key instead\. \'\et\' is supported as a regular expression metacharacter in awk, perl, and HHsed, sedmod, and GNU sed v3\.02\.80\.
.
.P
VERSIONS OF SED: Versions of sed do differ, and some slight syntax variation is to be expected\. In particular, most do not support the use of labels (:name) or branch instructions (b,t) within editing commands, except at the end of those commands\. We have used the syntax which will be portable to most users of sed, even though the popular GNU versions of sed allow a more succinct syntax\. When the reader sees a fairly long command such as this:
.
.P
sed \-e \'/AAA/b\' \-e \'/BBB/b\' \-e \'/CCC/b\' \-e d
.
.P
it is heartening to know that GNU sed will let you reduce it to:
.
.P
sed \'/AAA/b;/BBB/b;/CCC/b;d\' # or even sed \'/AAA\e|BBB\e|CCC/b;d\'
.
.P
In addition, remember that while many versions of sed accept a command like "/one/ s/RE1/RE2/", some do NOT allow "/one/! s/RE1/RE2/", which contains space before the \'s\'\. Omit the space when typing the command\.
.
.P
OPTIMIZING FOR SPEED: If execution speed needs to be increased (due to large input files or slow processors or hard disks), substitution will be executed more quickly if the "find" expression is specified before giving the "s/\.\.\./\.\.\./" instruction\. Thus:
.
.P
sed \'s/foo/bar/g\' filename # standard replace command sed \'/foo/ s/foo/bar/g\' filename # executes more quickly sed \'/foo/ s//bar/g\' filename # shorthand sed syntax
.
.P
On line selection or deletion in which you only need to output lines from the first part of the file, a "quit" command (q) in the script will drastically reduce processing time for large files\. Thus:
.
.P
sed \-n \'45,50p\' filename # print line nos\. 45\-50 of a file sed \-n \'51q;45,50p\' filename # same, but executes much faster
.
.P
If you have any additional scripts to contribute or if you find errors in this document, please send e\-mail to the compiler\. Indicate the version of sed you used, the operating system it was compiled for, and the nature of the problem\. Various scripts in this file were written or contributed by:
.
.SH "LINKS"
\fIhttp://www\.grymoire\.com/Unix/Sed\.html\fR
